<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Projects â€” Gillian N. Haigh</title>
  <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
<header class="site-header">
  <div class="container nav">
    <a class="brand" href="../index.html">GILLIAN N. HAIGH</a>
    <button class="mobile-toggle" aria-label="Open menu" onclick="document.querySelector('.menu').classList.toggle('open')">Menu</button>
    <nav class="menu">
      <a href="../work/index.html">WORK</a>
      <a href="../exhibitions/index.html">EXHIBITIONS</a>
      <a href="../projects/index.html">PROJECTS</a>
      <a href="../about/index.html">ABOUT / CONTACT</a>
    </nav>
  </div>
</header>
<main class="container">
  <h1 style="margin:24px 0">Projects</h1>
  <div id="projects" class="stack"></div>
</main>
<footer class="site-footer">
  <div class="container inner">
    <div>&copy; <span id="year"></span> Gillian N. Haigh</div>
    <div><a href="../about/index.html">Contact</a></div>
  </div>
</footer>
<script>
  document.getElementById('year').textContent = new Date().getFullYear();
  const path = location.pathname;
  document.querySelectorAll('.menu a').forEach(a=>{
    try{
      const u = new URL(a.href);
      if(u.pathname === path || path.endsWith(u.pathname)) a.classList.add('active');
    }catch(e){}
  });

  const container = document.getElementById('projects');

  const renderFallback = () => {
    container.innerHTML = `
      <section>
        <h2>IRSSS Fundraiser (2021)</h2>
        <p>A fundraiser project in support of the Indian Residential School Survivors Society.</p>
      </section>
      <section>
        <h2>Temporary Collective</h2>
        <p>Performance collective formed from a course at Emily Carr University (2018-).</p>
      </section>
      <section>
        <h2>Writing</h2>
        <p>Selected writing and press excerpts to be added.</p>
      </section>`;
  };

  fetch('../data/content.json')
    .then(r => r.ok ? r.json() : Promise.reject())
    .then(data => {
      const projects = data.projects || [];
      container.innerHTML = '';
      projects.forEach(item => {
        const sec = document.createElement('section');
        if (item.title) {
          const h = document.createElement('h2');
          h.textContent = item.title;
          sec.appendChild(h);
        }
        if (item.summary) {
          const p = document.createElement('p');
          p.textContent = item.summary;
          sec.appendChild(p);
        }
        container.appendChild(sec);
      });

      if (!container.children.length) renderFallback();
    })
    .catch(renderFallback);
</script>
</body>
</html>